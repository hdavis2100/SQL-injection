<!DOCTYPE html>
<html lang="en">    





<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
</head>
<body>
    <h2> Login:</h2>
    
    
    Username: <input type="text" id="username" name="username"><br>
    Password: <input type="password" id="password" name="password"><br>
    <button id="loginBtn" onclick="loginUser()">Login</button>


    <ul id="messages">

    </ul>

    <button id="logoutBtn" hidden onclick="logout()">Logout</button>

<script>

function loginUser() {
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;
    const formData = new FormData();
    formData.append('username', username);
    formData.append('password', password);

    fetch('login.php', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(Object.fromEntries(formData))

    })
    .then(response => response.json())
    .then(data => {
        console.log(data);
        const messagesList = document.getElementById('messages');
        messagesList.innerHTML = '';
        if(data.status === 'Logged in successfully') {
            data.messages.forEach(message => {
                const li = document.createElement('li');
                li.textContent = message.content;
                messagesList.appendChild(li);
            });
            document.getElementById('username').hidden = true;
            document.getElementById('password').hidden = true;
            document.getElementById('loginBtn').hidden = true;
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            document.getElementById('logoutBtn').hidden = false;
        } else {
            const li = document.createElement('li');
            li.textContent = 'Login failed';
            messagesList.appendChild(li);
        }
    })
    .catch(error => {
        console.error('Error:', error);
    });

}

function logout() {
    
    document.getElementById('username').hidden = false;
    document.getElementById('password').hidden = false;
    document.getElementById('loginBtn').hidden = false;
    document.getElementById('logoutBtn').hidden = true;
    document.getElementById('messages').innerHTML = '';
}





</script>

</body>


</html>